<!DOCTYPE html>
<html lang="en-us">

<head><script src="/ksauls/hugo/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=ksauls/hugo/livereload" data-no-instant defer></script>
  <meta http-equiv="X-Clacks-Overhead" content="GNU Terry Pratchett" />
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Connecting the MacBook to the Edgerouter VPN | Kevin&#39;s corner of the web</title>
<meta name="title" content="Connecting the MacBook to the Edgerouter VPN" />
<meta name="description" content="Connecting the MacBook to the Edgerouter VPN Today I fixed a problem that has vexed me for some time. Reading through the search pages, it seems it has vexed quite a few others, as well. I thought I&rsquo;d share my solution to this problem so that others might benefit.
What&rsquo;s the problem? I&rsquo;ve setup a VPN server on my Ubiquiti Edgerouter-X. The VPN works great with my Windows clients, but I&rsquo;ve not been able to get my MacBook or iPhone to connect." />
<meta name="keywords" content="" />


<meta property="og:url" content="http://localhost:1313/ksauls/hugo/posts/connecting-the-macbook-to-the-edgerouter-vpn/">
  <meta property="og:site_name" content="Kevin&#39;s corner of the web">
  <meta property="og:title" content="Connecting the MacBook to the Edgerouter VPN">
  <meta property="og:description" content="Connecting the MacBook to the Edgerouter VPN Today I fixed a problem that has vexed me for some time. Reading through the search pages, it seems it has vexed quite a few others, as well. I thought I’d share my solution to this problem so that others might benefit.
What’s the problem? I’ve setup a VPN server on my Ubiquiti Edgerouter-X. The VPN works great with my Windows clients, but I’ve not been able to get my MacBook or iPhone to connect.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2018-02-02T00:00:00+00:00">
    <meta property="article:modified_time" content="2018-02-02T00:00:00+00:00">




  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Connecting the MacBook to the Edgerouter VPN">
  <meta name="twitter:description" content="Connecting the MacBook to the Edgerouter VPN Today I fixed a problem that has vexed me for some time. Reading through the search pages, it seems it has vexed quite a few others, as well. I thought I’d share my solution to this problem so that others might benefit.
What’s the problem? I’ve setup a VPN server on my Ubiquiti Edgerouter-X. The VPN works great with my Windows clients, but I’ve not been able to get my MacBook or iPhone to connect.">




  <meta itemprop="name" content="Connecting the MacBook to the Edgerouter VPN">
  <meta itemprop="description" content="Connecting the MacBook to the Edgerouter VPN Today I fixed a problem that has vexed me for some time. Reading through the search pages, it seems it has vexed quite a few others, as well. I thought I’d share my solution to this problem so that others might benefit.
What’s the problem? I’ve setup a VPN server on my Ubiquiti Edgerouter-X. The VPN works great with my Windows clients, but I’ve not been able to get my MacBook or iPhone to connect.">
  <meta itemprop="datePublished" content="2018-02-02T00:00:00+00:00">
  <meta itemprop="dateModified" content="2018-02-02T00:00:00+00:00">
  <meta itemprop="wordCount" content="399">
<meta name="referrer" content="no-referrer-when-downgrade" />

  <style>
  body {
    font-family: monospace;
    margin: auto;
    padding: 20px;
    max-width: 720px;
    text-align: left;
    background-color: #fff;
    word-wrap: break-word;
    overflow-wrap: break-word;
    line-height: 2.5;
    color: #444;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6,
  strong,
  b {
    color: #222;
  }

  a {
    color: #3273dc;
     
  }

  .title {
    text-decoration: none;
    border: 0;
  }

  .title span {
    font-weight: 400;
  }

  nav a {
    margin-right: 10px;
    font-size: 18px;  
}

  textarea {
    width: 100%;
    font-size: 24px;
  }

  input {
    font-size: 24px;
  }

  content {
    line-height: 2;
    font-size: 16px;
  }

  table {
    width: 100%;
  }

  img {
    max-width: 100%;
  }

  code {
    padding: 2px 5px;
    background-color: #f2f2f2;
  }

  pre code {
    color: #222;
    display: block;
    padding: 20px;
    white-space: pre-wrap;
    font-size: 14px;
    overflow-x: auto;
  }

  div.highlight pre {
    background-color: initial;
    color: initial;
  }

  div.highlight code {
    background-color: unset;
    color: unset;
  }

  blockquote {
    border-left: 1px solid #999;
    color: #222;
    padding-left: 20px;
    font-style: italic;
  }

  footer {
    padding: 25px;
    text-align: center;
  }

  .helptext {
    color: #777;
    font-size: small;
  }

  .errorlist {
    color: #eba613;
    font-size: small;
  }

   
  ul.blog-posts {
    list-style-type: none;
    padding: unset;
  }

  ul.blog-posts li {
    display: flex;
  }

  ul.blog-posts li span {
    flex: 0 0 130px;
  }

  ul.blog-posts li a:visited {
    color: #8b6fcb;
  }
.footnotes {
  font-size: small;
}
  @media (prefers-color-scheme: dark) {
    body {
      background-color: #333;
      color: #ddd;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6,
    strong,
    b {
      color: #eee;
    }

    a {
      color: #8cc2dd;
    }

    code {
      background-color: #777;
    }

    pre code {
      color: #ddd;
    }

    blockquote {
      color: #ccc;
    }

    textarea,
    input {
      background-color: #252525;
      color: #ddd;
    }

    .helptext {
      color: #aaa;
    }
  }

</style>

</head>

<body>
  <header><a href="/ksauls/hugo/" class="title">
  <h2>Kevin&#39;s corner of the web</h2>
</a>
<nav><a href="/ksauls/hugo/">Home</a>

<a href="/ksauls/hugo/posts/">Posts</a>

<a href="/ksauls/hugo/book_reviews/">Book Reviews</a>

<a href="/ksauls/hugo/projects/">Projects</a>

<a href="/ksauls/hugo/tags/">tags</a>

<a href="/ksauls/hugo/categories/">categories</a>

<a href="/ksauls/hugo/about/">About</a>


</nav>
</header>
  <main>

<content>
  <h1 id="connecting-the-macbook-to-the-edgerouter-vpn">Connecting the MacBook to the Edgerouter VPN</h1>
<p>Today I fixed a problem that has vexed me for some time.  Reading through the
search pages, it seems it has vexed quite a few others, as well.  I thought I&rsquo;d
share my solution to this problem so that others might benefit.</p>
<!-- raw HTML omitted -->
<p>What&rsquo;s the problem?  I&rsquo;ve setup a VPN server on my Ubiquiti Edgerouter-X. The
VPN works great with my Windows clients, but I&rsquo;ve not been able to get my
MacBook or iPhone to connect. Until today.  The problem turned out to be quite
simple, though it took a bit of reading to figure it out.</p>
<p>There are dozens of articles and posts on the discussion boards about similar
problem and a multitude of solutions have been proposed. I turned on logging for
the firewall that provided exactly zero useful information I did a tcpdump
watching ports 500, 1701, and 4500 while I tried to connect. Lots of data, but
nothing useful.  Finally, I ran across a single post &ndash; I don&rsquo;t remember on what
board &ndash; that provided the solution.  The
only one
that
worked, though has been this one.  I make no promises that it will work for you,
but it is certainly worth investigating.</p>
<p>So, what&rsquo;s the solution?  When you&rsquo;re setting up your VPN you need to open three
ports: 500, 1701, and 4500.  Take a look at the NAT tab in the Firewall settings
of your GUI.  Is there an entry that points to a destination of 4500?  If so,
delete it.  It seems that some UPNP process hijacks port 4500, which is needed
to the MacBook to connect.  Deleting that entry frees up the port and allows the
VPN connection to complete.  Everything has been working just fine since I
deleted that pesky entry.</p>
<p>One word of caution: Be sure that the UPNP entry isn&rsquo;t required by some process
that you want to use.  In my case, the rule pointed to a destination in a
192.168.x.x network.  I don&rsquo;t use that network. My network is a 10.x.x.x.  I
knew that I could safely delete that entry.  Before deleting yours, double check
what it might be serving.  So far as I know, you can&rsquo;t change the ports for the
VPN, the client determines that.  But, you might be able to change the port on
the UPNP device, if you need to free up port 4500.</p>
<p>YMMV; good luck!</p>

</content>
<p>
  
</p>

  </main>
  <footer>© 2024 - Kevin Sauls ||
Made with <a href="https://github.com/janraasch/hugo-bearblog/">Hugo ʕ•ᴥ•ʔ Bear</a>
</footer>

    
</body>

</html>
