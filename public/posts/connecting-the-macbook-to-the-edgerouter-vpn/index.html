<!DOCTYPE html>
<html lang="en">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  
    <title>Connecting the MacBook to the Edgerouter VPN :: Kevin&#39;s Corner of the Web</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Connecting the MacBook to the Edgerouter VPN Today I fixed a problem that has vexed me for some time. Reading through the search pages, it seems it has vexed quite a few others, as well. I thought I&rsquo;d share my solution to this problem so that others might benefit.
What&rsquo;s the problem? I&rsquo;ve setup a VPN server on my Ubiquiti Edgerouter-X. The VPN works great with my Windows clients, but I&rsquo;ve not been able to get my MacBook or iPhone to connect. Until today. The problem turned out to be quite simple, though it took a bit of reading to figure it out.
" />
<meta name="keywords" content="" />

  <meta name="robots" content="noodp" />

<link rel="canonical" href="http://localhost:1313/posts/connecting-the-macbook-to-the-edgerouter-vpn/" />





  
  <link rel="stylesheet" href="http://localhost:1313/css/buttons.min.2bc533403a27dfe0e93105a92502b42ce4587e2e4a87d9f7d349e51e16e09478.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/code.min.00125962708925857e7b66dbc58391d55be1191a3d0ce2034de8c9cd2c481c36.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/fonts.min.4881f0c525f3ce2a1864fb6e96676396cebe1e6fcef1933e8e1dde7041004fb5.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/footer.min.2e3eb191baee58dd05a9f0104ac1fab0827bca7c64dafe0b2579f934c33a1d69.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/header.min.b6fb4423cf82a9f9d7abc9cd010223fa3d70a6526a3f28f8e17d814c06e18f9e.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/main.min.fe8dc560fccb53a458b0db19ccb7b265764ac46b68596b7e099c6793054dd457.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/menu.min.83637a90d903026bc280d3f82f96ceb06c5fc72b7c1a8d686afb5bbf818a29f7.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/pagination.min.82f6400eae7c7c6dc3c866733c2ec0579e4089608fea69400ff85b3880aa0d3c.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/post.min.fc74ca360273c1d828da3c02b8174eba435607b369d98418ccc6f2243cd4e75d.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/prism.min.9023bbc24533d09e97a51a0a42a5a7bfe4c591ae167c5551fb1d2191d11977c0.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/syntax.min.cc789ed9377260d7949ea4c18781fc58959a89287210fe4edbff44ebfc1511b6.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/terminal.min.4b367d85d0d0061435650561285afed36c46a7cf8dc6d7ed5642d98e589fa622.css">

  
  <link rel="stylesheet" href="http://localhost:1313/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css">







<link rel="shortcut icon" href="http://localhost:1313/favicon.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">


<meta name="twitter:card" content="summary" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Connecting the MacBook to the Edgerouter VPN">
<meta property="og:description" content="Connecting the MacBook to the Edgerouter VPN Today I fixed a problem that has vexed me for some time. Reading through the search pages, it seems it has vexed quite a few others, as well. I thought I&rsquo;d share my solution to this problem so that others might benefit.
What&rsquo;s the problem? I&rsquo;ve setup a VPN server on my Ubiquiti Edgerouter-X. The VPN works great with my Windows clients, but I&rsquo;ve not been able to get my MacBook or iPhone to connect. Until today. The problem turned out to be quite simple, though it took a bit of reading to figure it out.
" />
<meta property="og:url" content="http://localhost:1313/posts/connecting-the-macbook-to-the-edgerouter-vpn/" />
<meta property="og:site_name" content="Kevin&#39;s Corner of the Web" />

  <meta property="og:image" content="http://localhost:1313/og-image.png">

<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="627">


  <meta property="article:published_time" content="2018-02-02 00:00:00 &#43;0000 UTC" />












</head>
<body>


<div class="container center">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="http://localhost:1313/">
  <div class="logo">
    Terminal
  </div>
</a>

    </div>
    
      <ul class="menu menu--mobile">
  <li class="menu__trigger">Menu&nbsp;▾</li>
  <li>
    <ul class="menu__dropdown">
      
        
          <li><a href="/posts/">Posts</a></li>
        
      
        
          <li><a href="/book_reviews/">Book Reviews</a></li>
        
      
        
          <li><a href="/projects/">Projects</a></li>
        
      
        
          <li><a href="/tags/">tags</a></li>
        
      
        
          <li><a href="/categories/">categories</a></li>
        
      
        
          <li><a href="/about/">About</a></li>
        
      
      
    </ul>
  </li>
</ul>

    
    
  </div>
  
    <nav class="navigation-menu">
  <ul class="navigation-menu__inner menu--desktop">
    
      
        
          <li><a href="/posts/" >Posts</a></li>
        
      
        
          <li><a href="/book_reviews/" >Book Reviews</a></li>
        
      
        
          <li><a href="/projects/" >Projects</a></li>
        
      
        
          <li><a href="/tags/" >tags</a></li>
        
      
        
          <li><a href="/categories/" >categories</a></li>
        
      
        
          <li><a href="/about/" >About</a></li>
        
      
      
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<article class="post">
  <h1 class="post-title">
    <a href="http://localhost:1313/posts/connecting-the-macbook-to-the-edgerouter-vpn/">Connecting the MacBook to the Edgerouter VPN</a>
  </h1>
  <div class="post-meta"><time class="post-date">2018-02-02</time></div>

  
  


  

  <div class="post-content"><div>
        <h1 id="connecting-the-macbook-to-the-edgerouter-vpn">Connecting the MacBook to the Edgerouter VPN<a href="#connecting-the-macbook-to-the-edgerouter-vpn" class="hanchor" ariaLabel="Anchor">#</a> </h1>
<p>Today I fixed a problem that has vexed me for some time.  Reading through the
search pages, it seems it has vexed quite a few others, as well.  I thought I&rsquo;d
share my solution to this problem so that others might benefit.</p>
<!-- raw HTML omitted -->
<p>What&rsquo;s the problem?  I&rsquo;ve setup a VPN server on my Ubiquiti Edgerouter-X. The
VPN works great with my Windows clients, but I&rsquo;ve not been able to get my
MacBook or iPhone to connect. Until today.  The problem turned out to be quite
simple, though it took a bit of reading to figure it out.</p>
<p>There are dozens of articles and posts on the discussion boards about similar
problem and a multitude of solutions have been proposed. I turned on logging for
the firewall that provided exactly zero useful information I did a tcpdump
watching ports 500, 1701, and 4500 while I tried to connect. Lots of data, but
nothing useful.  Finally, I ran across a single post &ndash; I don&rsquo;t remember on what
board &ndash; that provided the solution.  The
only one
that
worked, though has been this one.  I make no promises that it will work for you,
but it is certainly worth investigating.</p>
<p>So, what&rsquo;s the solution?  When you&rsquo;re setting up your VPN you need to open three
ports: 500, 1701, and 4500.  Take a look at the NAT tab in the Firewall settings
of your GUI.  Is there an entry that points to a destination of 4500?  If so,
delete it.  It seems that some UPNP process hijacks port 4500, which is needed
to the MacBook to connect.  Deleting that entry frees up the port and allows the
VPN connection to complete.  Everything has been working just fine since I
deleted that pesky entry.</p>
<p>One word of caution: Be sure that the UPNP entry isn&rsquo;t required by some process
that you want to use.  In my case, the rule pointed to a destination in a
192.168.x.x network.  I don&rsquo;t use that network. My network is a 10.x.x.x.  I
knew that I could safely delete that entry.  Before deleting yours, double check
what it might be serving.  So far as I know, you can&rsquo;t change the ports for the
VPN, the client determines that.  But, you might be able to change the port on
the UPNP device, if you need to free up port 4500.</p>
<p>YMMV; good luck!</p>

      </div></div>

  
    
<div class="pagination">
  <div class="pagination__title">
    <span class="pagination__title-h">Read other posts</span>
    <hr />
  </div>
  <div class="pagination__buttons">
    
      <a href="http://localhost:1313/posts/nextcloud-onlyoffice-and-the-like/" class="button inline prev">
        Nextcloud, OnlyOffice and the Like 
      </a>
    
    
      ::
    
    
      <a href="http://localhost:1313/posts/making-progress-slowly/" class="button inline next">
        Making Progress ... Slowly
      </a>
    
  </div>
</div>


  

  
    

  
</article>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>© 2025 Powered by <a href="https://gohugo.io">Hugo</a></span>
    
      <span>:: <a href="https://github.com/panr/hugo-theme-terminal" target="_blank">Theme</a> made by <a href="https://github.com/panr" target="_blank">panr</a></span>
      </div>
  </div>
</footer>






<script type="text/javascript" src="/bundle.min.js"></script>





  
</div>

</body>
</html>
